{"version":3,"sources":["app.coffee","app.js"],"names":["base64Decode","loadCats","pis","$","get","data","empty","append","console","log","summernote","height","width","document","on","event","ajax","type","headers","X-CSRF-TOKEN","val","forum_id","target","id","split","error","jqXHR","textStatus","errorThrown","success","cat_id","value","submit","about","Version","Author","Created","Updated","window","this","e","getElementById","base64","buffer","decoded","i","imgtype","view","match","atob","ArrayBuffer","length","Uint8Array","charCodeAt","prototype","fields","coordCheck","emailCheck","alert","genderCheck","phoneCheck","readImage","input","reader","files","FileReader","onload","result","readAsDataURL","pattern","test","call"],"mappings":"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","file":"app.js","sourcesContent":["loadCats = ->\r\n  $.get '/forum/getcats',\r\n  (data) ->\r\n    $('.categories_show').empty()\r\n    $('.categories_show').append(data)\r\n    console.log(\"Appended data\")\r\n$ ->\r\n  ###############################\r\n  ########FOR ADMIN PAGE#########\r\n  ###############################\r\n\r\n  $(\"#summernote\").summernote({\r\n    height: 300\r\n    width: 500\r\n    })\r\n\r\n  #Load category partial on dom ready / only on admin page\r\n  if('.categories_show')\r\n    loadCats()\r\n\r\n  $(document).on \"click\", \".cat_del\", (event) ->\r\n    $.ajax '/forum/deleteforum',\r\n      type: 'DELETE'\r\n      headers: {'X-CSRF-TOKEN': $('input[name=_token]').val()}\r\n      data: {forum_id: event.target.id.split(\"_\")[2] }\r\n      error: (jqXHR, textStatus, errorThrown) ->\r\n        console.log(textStatus)\r\n      success: (data, textStatus, jqXHR) ->\r\n        loadCats()\r\n    console.log(event.target.id.split(\"_\")[2])\r\n\r\n  $(document).on \"click\",'.forum_del', (event) ->\r\n    $.ajax '/forum/deleteforum',\r\n      type: 'DELETE'\r\n      headers: {'X-CSRF-TOKEN': $('input[name=_token]').val()}\r\n      data: {forum_id: event.target.id.split(\"_\")[2] }\r\n      error: (jqXHR, textStatus, errorThrown) ->\r\n        console.log(textStatus)\r\n      success: (data, textStatus, jqXHR) ->\r\n        loadCats()\r\n    console.log(event.target.id.split(\"_\")[2])\r\n\r\n  $(document).on \"change\",'.change_cat', (event) ->\r\n    $.ajax '/forum/changecat',\r\n      type: 'PATCH'\r\n      headers: {'X-CSRF-TOKEN': $('input[name=_token]').val()}\r\n      data: {forum_id: event.target.id.split(\"_\")[2], cat_id: event.target.value}\r\n      error: (jqXHR, textStatus, errorThrown) ->\r\n      #console.log(textStatus)\r\n      success: (data, textStatus, jqXHR) ->\r\n        loadCats()\r\n    console.log(event.target.value)\r\n\r\n  $(document).on \"click\", \"#create_topic_button\", (event) ->\r\n    pis(\"create_topic_form\").submit(['post_text', 'title'])\r\n\r\n\r\n\r\n#AAAAAAAAAAAAAAAAA\r\n#THIS IS THE SECURITY STUFF\r\npis = (id) ->\r\n  about =\r\n    Version: 0.01\r\n    Author: 'Kevin Ferm'\r\n    Created: 'March 2016'\r\n    Updated: '31/3-16'\r\n  if id\r\n    #Create instance of function\r\n    if window == this\r\n      return new pis(id)\r\n    @e = document.getElementById(id)\r\n    this\r\n  else\r\n    about\r\n\r\nbase64Decode = (base64) ->\r\n  data = base64.split(',')\r\n  imgtype = data[0].match(/:([^}]*);/)[1]\r\n  decoded = atob(data[1])\r\n  buffer = new ArrayBuffer(decoded.length)\r\n  view = new Uint8Array(buffer)\r\n  i = decoded.length - 1\r\n  while i >= 0\r\n    view[i] = decoded.charCodeAt(i)\r\n    i--\r\n  console.log view\r\n  return\r\n\r\npis.prototype =\r\n  submit: (fields) ->\r\n    # implementation\r\n    if fields\r\n      #Search fields that are named in the array\r\n      i = fields.length - 1\r\n      while i >= 0\r\n        if @e[fields[i]]\r\n          if @e[fields[i]].type == 'text' or @e[fields[i]].type == 'hidden' or @e[fields[i]].type == 'password' or @e[fields[i]].type == 'textarea'\r\n            #Do the checking here\r\n            console.log @coordCheck(@e[fields[i]].value)\r\n            if @emailCheck(@e[fields[i]].value)\r\n              alert 'There is an email address contained in your message, are you sure you want to post this? - ' + @e[fields[i]].value\r\n            if @coordCheck(@e[fields[i]].value)\r\n              alert 'There is a coordinate contained in your message, are you sure you want to post this? - ' + @e[fields[i]].value\r\n            if @genderCheck(@e[fields[i]].value)\r\n              alert 'There is a gender contained in your message, are you sure you want to post this? - ' + @e[fields[i]].value\r\n            if @phoneCheck(@e[fields[i]].value)\r\n              alert 'There is a phone number contained in your message, are you sure you want to post this? - ' + @e[fields[i]].value\r\n            console.log @e[fields[i]].value\r\n          else if @e[fields[i]].type == 'file'\r\n            console.log 'FILE TYPE'\r\n            @readImage @e[fields[i]]\r\n          else\r\n            console.log fields[i] + ' has no value'\r\n        else\r\n          console.log 'There is no such field as: ' + fields[i]\r\n        i--\r\n    else\r\n      #Search all\r\n    console.log @e\r\n    this.e.submit();\r\n    this\r\n  readImage: (input) ->\r\n    if input.files and input.files[0]\r\n      reader = new FileReader\r\n\r\n      reader.onload = (e) ->\r\n        #console.log(e.target.result);\r\n        base64Decode e.target.result\r\n        e\r\n\r\n      reader.readAsDataURL input.files[0]\r\n    return\r\n  emailCheck: (input) ->\r\n    pattern = /^(\\w|\\-|\\_|\\.)+\\@((\\w|\\-|\\_)+\\.)+[a-zA-Z]{2,}$/\r\n    pattern.test input\r\n  genderCheck: (input) ->\r\n    pattern = /^(fe)?male$/\r\n    pattern.test input\r\n  phoneCheck: (input) ->\r\n    pattern = /^([+]47)?((38[{8,9}|0])|(34[{7-9}|0])|(36[6|8|0])|(33[{3-9}|0])|(32[{8,9}]))([\\d]{7})$/\r\n    pattern.test input\r\n  coordCheck: (input) ->\r\n    pattern = /^[-+]?([1-8]?\\d(\\.\\d+)?|90(\\.0+)?),\\s*[-+]?(180(\\.0+)?|((1[0-7]\\d)|([1-9]?\\d))(\\.\\d+)?)$/\r\n    pattern.test input\r\n","(function() {\n  var base64Decode, loadCats, pis;\n\n  loadCats = function() {\n    return $.get('/forum/getcats', function(data) {\n      $('.categories_show').empty();\n      $('.categories_show').append(data);\n      return console.log(\"Appended data\");\n    });\n  };\n\n  $(function() {\n    $(\"#summernote\").summernote({\n      height: 300,\n      width: 500\n    });\n    if ('.categories_show') {\n      loadCats();\n    }\n    $(document).on(\"click\", \".cat_del\", function(event) {\n      $.ajax('/forum/deleteforum', {\n        type: 'DELETE',\n        headers: {\n          'X-CSRF-TOKEN': $('input[name=_token]').val()\n        },\n        data: {\n          forum_id: event.target.id.split(\"_\")[2]\n        },\n        error: function(jqXHR, textStatus, errorThrown) {\n          return console.log(textStatus);\n        },\n        success: function(data, textStatus, jqXHR) {\n          return loadCats();\n        }\n      });\n      return console.log(event.target.id.split(\"_\")[2]);\n    });\n    $(document).on(\"click\", '.forum_del', function(event) {\n      $.ajax('/forum/deleteforum', {\n        type: 'DELETE',\n        headers: {\n          'X-CSRF-TOKEN': $('input[name=_token]').val()\n        },\n        data: {\n          forum_id: event.target.id.split(\"_\")[2]\n        },\n        error: function(jqXHR, textStatus, errorThrown) {\n          return console.log(textStatus);\n        },\n        success: function(data, textStatus, jqXHR) {\n          return loadCats();\n        }\n      });\n      return console.log(event.target.id.split(\"_\")[2]);\n    });\n    $(document).on(\"change\", '.change_cat', function(event) {\n      $.ajax('/forum/changecat', {\n        type: 'PATCH',\n        headers: {\n          'X-CSRF-TOKEN': $('input[name=_token]').val()\n        },\n        data: {\n          forum_id: event.target.id.split(\"_\")[2],\n          cat_id: event.target.value\n        },\n        error: function(jqXHR, textStatus, errorThrown) {},\n        success: function(data, textStatus, jqXHR) {\n          return loadCats();\n        }\n      });\n      return console.log(event.target.value);\n    });\n    return $(document).on(\"click\", \"#create_topic_button\", function(event) {\n      return pis(\"create_topic_form\").submit(['post_text', 'title']);\n    });\n  });\n\n  pis = function(id) {\n    var about;\n    about = {\n      Version: 0.01,\n      Author: 'Kevin Ferm',\n      Created: 'March 2016',\n      Updated: '31/3-16'\n    };\n    if (id) {\n      if (window === this) {\n        return new pis(id);\n      }\n      this.e = document.getElementById(id);\n      return this;\n    } else {\n      return about;\n    }\n  };\n\n  base64Decode = function(base64) {\n    var buffer, data, decoded, i, imgtype, view;\n    data = base64.split(',');\n    imgtype = data[0].match(/:([^}]*);/)[1];\n    decoded = atob(data[1]);\n    buffer = new ArrayBuffer(decoded.length);\n    view = new Uint8Array(buffer);\n    i = decoded.length - 1;\n    while (i >= 0) {\n      view[i] = decoded.charCodeAt(i);\n      i--;\n    }\n    console.log(view);\n  };\n\n  pis.prototype = {\n    submit: function(fields) {\n      var i;\n      if (fields) {\n        i = fields.length - 1;\n        while (i >= 0) {\n          if (this.e[fields[i]]) {\n            if (this.e[fields[i]].type === 'text' || this.e[fields[i]].type === 'hidden' || this.e[fields[i]].type === 'password' || this.e[fields[i]].type === 'textarea') {\n              console.log(this.coordCheck(this.e[fields[i]].value));\n              if (this.emailCheck(this.e[fields[i]].value)) {\n                alert('There is an email address contained in your message, are you sure you want to post this? - ' + this.e[fields[i]].value);\n              }\n              if (this.coordCheck(this.e[fields[i]].value)) {\n                alert('There is a coordinate contained in your message, are you sure you want to post this? - ' + this.e[fields[i]].value);\n              }\n              if (this.genderCheck(this.e[fields[i]].value)) {\n                alert('There is a gender contained in your message, are you sure you want to post this? - ' + this.e[fields[i]].value);\n              }\n              if (this.phoneCheck(this.e[fields[i]].value)) {\n                alert('There is a phone number contained in your message, are you sure you want to post this? - ' + this.e[fields[i]].value);\n              }\n              console.log(this.e[fields[i]].value);\n            } else if (this.e[fields[i]].type === 'file') {\n              console.log('FILE TYPE');\n              this.readImage(this.e[fields[i]]);\n            } else {\n              console.log(fields[i] + ' has no value');\n            }\n          } else {\n            console.log('There is no such field as: ' + fields[i]);\n          }\n          i--;\n        }\n      } else {\n\n      }\n      console.log(this.e);\n      this.e.submit();\n      return this;\n    },\n    readImage: function(input) {\n      var reader;\n      if (input.files && input.files[0]) {\n        reader = new FileReader;\n        reader.onload = function(e) {\n          base64Decode(e.target.result);\n          return e;\n        };\n        reader.readAsDataURL(input.files[0]);\n      }\n    },\n    emailCheck: function(input) {\n      var pattern;\n      pattern = /^(\\w|\\-|\\_|\\.)+\\@((\\w|\\-|\\_)+\\.)+[a-zA-Z]{2,}$/;\n      return pattern.test(input);\n    },\n    genderCheck: function(input) {\n      var pattern;\n      pattern = /^(fe)?male$/;\n      return pattern.test(input);\n    },\n    phoneCheck: function(input) {\n      var pattern;\n      pattern = /^([+]47)?((38[{8,9}|0])|(34[{7-9}|0])|(36[6|8|0])|(33[{3-9}|0])|(32[{8,9}]))([\\d]{7})$/;\n      return pattern.test(input);\n    },\n    coordCheck: function(input) {\n      var pattern;\n      pattern = /^[-+]?([1-8]?\\d(\\.\\d+)?|90(\\.0+)?),\\s*[-+]?(180(\\.0+)?|((1[0-7]\\d)|([1-9]?\\d))(\\.\\d+)?)$/;\n      return pattern.test(input);\n    }\n  };\n\n}).call(this);\n"],"sourceRoot":"/source/"}